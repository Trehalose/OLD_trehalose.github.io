<!DOCTYPE html>
<html>
	<head>
		<title>書く枠: Kakuwaku</title>
		<style>
/*NORMAL JUNK*/
			body{
				background-color: #bca7b0;
				background-image: url("https://38.media.tumblr.com/14fc9e6728310a758e8e55c52e53a0dd/tumblr_n8n89ftS961tb9zwto8_r2_1280.jpg");
				background-repeat: no-repeat;
				background-size: 100% auto%;
				background-position: right top;
				background-attachment: fixed;
				color: #8e3a61;
				font-family: "Times New Roman", Times, serif;
				padding-top: 10%;
			}
			footer p{
				display: block;
				margin-left: 225px;
			}
			section{
				background: #d6cfd1;
				display: inline-block;
			}
			h1{
				font-size: 24px;
				padding: 5px 0px;
				border: 1px solid #000000;
				background: #D5339E;
				margin-top: 0px;
				margin-bottom: 0px;
				color: #fcfcfc;
			}
			h1 p{
				font-size: 16px;
				margin: 0px;
			}
			h2{
				font-size: 24px;
				border: 1px solid #000000;
				background: #D5339E;
				margin-top: 0px;
				padding: 5px 0px;
				color: #fcfcfc;
			}
			h6{
				font-size: 11px;
				display: none;
				border: 1px solid #000000;	
				background: #b2a0a2;
				color: #ececec;
			}
			details{
				height: 300px;
			}
			details li{
				text-align: left;
				font-size: 12px;
				font-style: italic;
				padding-top: 6px;
				width: 230px;
			}
			summary{
				font-size: 18px;
				border: 1px solid #000000;
				background: #b2a0a2;
				color: #ececec;
			}
			aside{
				text-align: center;
				width: 300px;
			}
			#introSect{
				display: inline-block;
				vertical-align: top;
				height: 470px;
			}
			#infoSect{
				display: inline-block;
				text-align: center;
				width: 200px;
				height: 470px;
				vertical-align: top;
			}
			#workSect{
				display: inline-block;
			}
/*WRITING AREA STUFF*/
			canvas{
				border: 1px solid #000000;
				display: inline-block;
				background-color: #fcfcfc;
				background-image: url('https://38.media.tumblr.com/a007e96a424fc57488223967f0ad9fa0/tumblr_n908q3212o1tb9zwto1_400.png');
			}
/*OPTIONS MENUS STUFF*/
			#options{
				padding: 0px;
				text-align: center;
				list-style: none;
			}
			#options li{
				display: inline-block;
				padding: 0px 5px;
			}
			#clearButton{
				display: inline-block;
				padding: 125px 0px;
				vertical-align: top;
			}
			#newButton{
				display: inline-block;
				padding: 125px 0px;
				vertical-align: top;
			}
			.buttonNormal{
				border: 1px solid #8e3a61;
				color: #fcfcfc;
				background: #b2a0a2;
			}
			.buttonNormal:hover{
				color: #fcfcfc;
				background: #fd00a8;
			}
			.buttonClicked{
				color: #fd00a8;
				background: #fcfcfc;
			}
			.functional{
				border: 1px solid #000000;
				color: #8e3a61;
				background: #ececec;
			}
			.disabled{
				border: 1px solid #bbbbbb;
				color: #dddddd;
				background: #cccccc;
			}
			.selected{
				border: 1px solid #000000;
				color: #fcfcfc;
				background: #fd00a8;
			}
/*API INPUT STUFF*/
			#apiArea{
				margin-left: 70px;
			}
			input[type="text"]{
				display: block;
				background: #fcfcfc;
			}
			input[type="text"]:disabled{
				display: block;
				background: #cccccc;
				color: #dddddd;
			}
			#inputButton{
				text-align: center;
			}
/*ASIDE STUFF*/
		</style>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
		
		
	</head>
	<body>
		<section id="infoSect">
			<h2 id="thisKanji">INSERT</h2>
			<p id="thisMeaning">Your API key</p>
			<h6>ONYOMI</h6>
			<p id="thisOnyomi">then press start</p>
			<h6>KUNYOMI</h6>
			<p id="thisKunyomi">to practice.</p>
		</section>
		<section id="workSect">
			<ul id="options">
				<li name="level" value="0" onclick="clickLevel(this);">All Kanji</li>
				<li name="level" value="-1" onclick="clickLevel(this);">Hiragana</li>
				<li name="level" value="-2" onclick="clickLevel(this);">Katakana</li><br>
				<li name="level" value="1" onclick="clickLevel(this);">1</li>
				<li name="level" value="2" onclick="clickLevel(this);">2</li>
				<li name="level" value="3" onclick="clickLevel(this);">3</li>
				<li name="level" value="4" onclick="clickLevel(this);">4</li>
				<li name="level" value="5" onclick="clickLevel(this);">5</li>
				<li name="level" value="6" onclick="clickLevel(this);">6</li>
				<li name="level" value="7" onclick="clickLevel(this);">7</li>
				<li name="level" value="8" onclick="clickLevel(this);">8</li>
				<li name="level" value="9" onclick="clickLevel(this);">9</li>
				<li name="level" value="10" onclick="clickLevel(this);">10</li><br>
				<li name="level" value="11" onclick="clickLevel(this);">11</li>
				<li name="level" value="12" onclick="clickLevel(this);">12</li>
				<li name="level" value="13" onclick="clickLevel(this);">13</li>
				<li name="level" value="14" onclick="clickLevel(this);">14</li>
				<li name="level" value="15" onclick="clickLevel(this);">15</li>
				<li name="level" value="16" onclick="clickLevel(this);">16</li>
				<li name="level" value="17" onclick="clickLevel(this);">17</li>
				<li name="level" value="18" onclick="clickLevel(this);">18</li>
				<li name="level" value="19" onclick="clickLevel(this);">19</li>
				<li name="level" value="20" onclick="clickLevel(this);">20</li><br>
				<li name="level" value="21" onclick="clickLevel(this);">21</li>
				<li name="level" value="22" onclick="clickLevel(this);">22</li>
				<li name="level" value="23" onclick="clickLevel(this);">23</li>
				<li name="level" value="24" onclick="clickLevel(this);">24</li>
				<li name="level" value="25" onclick="clickLevel(this);">25</li>
				<li name="level" value="26" onclick="clickLevel(this);">26</li>
				<li name="level" value="27" onclick="clickLevel(this);">27</li>
				<li name="level" value="28" onclick="clickLevel(this);">28</li>
				<li name="level" value="29" onclick="clickLevel(this);">29</li>
				<li name="level" value="30" onclick="clickLevel(this);">30</li><br>
				<li name="level" value="31" onclick="clickLevel(this);">31</li>
				<li name="level" value="32" onclick="clickLevel(this);">32</li>
				<li name="level" value="33" onclick="clickLevel(this);">33</li>
				<li name="level" value="34" onclick="clickLevel(this);">34</li>
				<li name="level" value="35" onclick="clickLevel(this);">35</li>
				<li name="level" value="36" onclick="clickLevel(this);">36</li>
				<li name="level" value="37" onclick="clickLevel(this);">37</li>
				<li name="level" value="38" onclick="clickLevel(this);">38</li>
				<li name="level" value="39" onclick="clickLevel(this);">39</li>
				<li name="level" value="40" onclick="clickLevel(this);">40</li><br>
				<li name="level" value="41" onclick="clickLevel(this);">41</li>
				<li name="level" value="42" onclick="clickLevel(this);">42</li>
				<li name="level" value="43" onclick="clickLevel(this);">43</li>
				<li name="level" value="44" onclick="clickLevel(this);">44</li>
				<li name="level" value="45" onclick="clickLevel(this);">45</li>
				<li name="level" value="46" onclick="clickLevel(this);">46</li>
				<li name="level" value="47" onclick="clickLevel(this);">47</li>
				<li name="level" value="48" onclick="clickLevel(this);">48</li>
				<li name="level" value="49" onclick="clickLevel(this);">49</li>
				<li name="level" value="50" onclick="clickLevel(this);">50</li>
			</ul>
			<section>
				<div class="disabled" id="clearButton"><p>CLEAR</p></div>
				<canvas id="datcanvass" width="300" height="300">In its current state, your browser doesn't seem to support HTML5 the "canvas" tag.<br>Perhaps it is time for an update. 'Canvas' is essential for this operation. </canvas>
				<div class="disabled" id="newButton"><p>NEW</p></div>
			</section>
		</section>
		<section id="introSect">
			<!-- TODO: API KEY INPUT FORM, DIRECTIIONS -->
			<aside>
				<h1>わくかく</h1>
				<p><em><strong> Quick little stroke-tracer for practicing your Wanikanjis. </strong></em></p>
				<details><summary>BRUSH-UP TIPS</summary>
				<ul><li>Start stroke from Left & Top toward Right and Bottom. </li>
					<li>Horizontal lines before Vertical lines</li>
					<li>Characters that enclose things should have their contents drawn before the bottom enclosing line</li>
					<li>Right-to-Left diagonals before Left-to-Right verticals</li>
					<li>Central vertical line before its symmetrical surroundings</li>
					<li>Dots, dashes, and special toppings are last</li>
					<li>Kanji-sized radicals are best written in sections</li>
				</ul></details>
			</aside>
			<section id="apiArea">
				<input type="text" id="apiInput" placeholder="Insert API key here"></input>
				<div class="buttonNormal" id="inputButton">Start!</div>
			</section>
		</section>
		<footer><p>Wanikani API & Mascot(background) © Tofugu LLC, よ。</p></footer>
<!-- ITS THE SCRIPPZ -->
		<script>
//VARIABLES
			var writeBox = document.getElementById("datcanvass");	//CANVAS STUFF
			var ctx = writeBox.getContext("2d");
			var kanji = [];		//API && INFO-DATA STUFF
			var user = "";
			var userLVL = 0;
			var hiragana = [{"character":"あ","meaning":"a","kunyomi":null,"onyomi":null},{"character":"い","meaning":"i","kunyomi":null,"onyomi":null},{"character":"う","meaning":"u","kunyomi":null,"onyomi":null},{"character":"え","meaning":"e","kunyomi":null,"onyomi":null},{"character":"お","meaning":"o","kunyomi":null,"onyomi":null},{"character":"か","meaning":"ka","kunyomi":null,"onyomi":null},{"character":"き","meaning":"ki","kunyomi":null,"onyomi":null},{"character":"く","meaning":"ku","kunyomi":null,"onyomi":null},{"character":"け","meaning":"ke","kunyomi":null,"onyomi":null},{"character":"こ","meaning":"ko","kunyomi":null,"onyomi":null},{"character":"さ","meaning":"sa","kunyomi":null,"onyomi":null},{"character":"し","meaning":"shi, si","kunyomi":null,"onyomi":null},{"character":"す","meaning":"su","kunyomi":null,"onyomi":null},{"character":"せ","meaning":"se","kunyomi":null,"onyomi":null},{"character":"そ","meaning":"so","kunyomi":null,"onyomi":null},{"character":"た","meaning":"ta","kunyomi":null,"onyomi":null},{"character":"ち","meaning":"chi, ti","kunyomi":null,"onyomi":null},{"character":"つ","meaning":"tsu, tu","kunyomi":null,"onyomi":null},{"character":"て","meaning":"te","kunyomi":null,"onyomi":null},{"character":"と","meaning":"to","kunyomi":null,"onyomi":null},{"character":"な","meaning":"na","kunyomi":null,"onyomi":null},{"character":"に","meaning":"ni","kunyomi":null,"onyomi":null},{"character":"ぬ","meaning":"nu","kunyomi":null,"onyomi":null},{"character":"ね","meaning":"ne","kunyomi":null,"onyomi":null},{"character":"の","meaning":"no","kunyomi":null,"onyomi":null},{"character":"は","meaning":"ha","kunyomi":null,"onyomi":null},{"character":"ひ","meaning":"hi","kunyomi":null,"onyomi":null},{"character":"ふ","meaning":"fu, hu","kunyomi":null,"onyomi":null},{"character":"へ","meaning":"he","kunyomi":null,"onyomi":null},{"character":"ほ","meaning":"ho","kunyomi":null,"onyomi":null},{"character":"ま","meaning":"ma","kunyomi":null,"onyomi":null},{"character":"み","meaning":"mi","kunyomi":null,"onyomi":null},{"character":"む","meaning":"mu","kunyomi":null,"onyomi":null},{"character":"め","meaning":"me","kunyomi":null,"onyomi":null},{"character":"も","meaning":"mo","kunyomi":null,"onyomi":null},{"character":"や","meaning":"ya","kunyomi":null,"onyomi":null},{"character":"ゆ","meaning":"yu","kunyomi":null,"onyomi":null},{"character":"よ","meaning":"yo","kunyomi":null,"onyomi":null},{"character":"ら","meaning":"ra","kunyomi":null,"onyomi":null},{"character":"り","meaning":"ri","kunyomi":null,"onyomi":null},{"character":"る","meaning":"ru","kunyomi":null,"onyomi":null},{"character":"れ","meaning":"re","kunyomi":null,"onyomi":null},{"character":"ろ","meaning":"ro","kunyomi":null,"onyomi":null},{"character":"わ","meaning":"wa","kunyomi":null,"onyomi":null},{"character":"を","meaning":"wo","kunyomi":null,"onyomi":null},{"character":"ん","meaning":"n, nn","kunyomi":null,"onyomi":null}];
			var katakana = [{"character":"ア","meaning":"a","kunyomi":null,"onyomi":null},{"character":"イ","meaning":"i","kunyomi":null,"onyomi":null},{"character":"ウ","meaning":"u","kunyomi":null,"onyomi":null},{"character":"エ","meaning":"e","kunyomi":null,"onyomi":null},{"character":"オ","meaning":"o","kunyomi":null,"onyomi":null},{"character":"カ","meaning":"ka","kunyomi":null,"onyomi":null},{"character":"キ","meaning":"ki","kunyomi":null,"onyomi":null},{"character":"ク","meaning":"ku","kunyomi":null,"onyomi":null},{"character":"ケ","meaning":"ke","kunyomi":null,"onyomi":null},{"character":"コ","meaning":"ko","kunyomi":null,"onyomi":null},{"character":"サ","meaning":"sa","kunyomi":null,"onyomi":null},{"character":"シ","meaning":"shi, si","kunyomi":null,"onyomi":null},{"character":"ス","meaning":"su","kunyomi":null,"onyomi":null},{"character":"セ","meaning":"se","kunyomi":null,"onyomi":null},{"character":"ソ","meaning":"so","kunyomi":null,"onyomi":null},{"character":"タ","meaning":"ta","kunyomi":null,"onyomi":null},{"character":"チ","meaning":"chi, ti","kunyomi":null,"onyomi":null},{"character":"ツ","meaning":"tsu, tu","kunyomi":null,"onyomi":null},{"character":"テ","meaning":"te","kunyomi":null,"onyomi":null},{"character":"ト","meaning":"to","kunyomi":null,"onyomi":null},{"character":"ナ","meaning":"na","kunyomi":null,"onyomi":null},{"character":"ニ","meaning":"ni","kunyomi":null,"onyomi":null},{"character":"ヌ","meaning":"nu","kunyomi":null,"onyomi":null},{"character":"ネ","meaning":"ne","kunyomi":null,"onyomi":null},{"character":"ノ","meaning":"no","kunyomi":null,"onyomi":null},{"character":"ハ","meaning":"ha","kunyomi":null,"onyomi":null},{"character":"ヒ","meaning":"hi","kunyomi":null,"onyomi":null},{"character":"フ","meaning":"fu, hu","kunyomi":null,"onyomi":null},{"character":"ヘ","meaning":"he","kunyomi":null,"onyomi":null},{"character":"ホ","meaning":"ho","kunyomi":null,"onyomi":null},{"character":"マ","meaning":"ma","kunyomi":null,"onyomi":null},{"character":"ミ","meaning":"mi","kunyomi":null,"onyomi":null},{"character":"ム","meaning":"mu","kunyomi":null,"onyomi":null},{"character":"メ","meaning":"me","kunyomi":null,"onyomi":null},{"character":"モ","meaning":"mo","kunyomi":null,"onyomi":null},{"character":"ヤ","meaning":"ya","kunyomi":null,"onyomi":null},{"character":"ユ","meaning":"yu","kunyomi":null,"onyomi":null},{"character":"ヨ","meaning":"yo","kunyomi":null,"onyomi":null},{"character":"ラ","meaning":"ra","kunyomi":null,"onyomi":null},{"character":"リ","meaning":"ri","kunyomi":null,"onyomi":null},{"character":"ル","meaning":"ru","kunyomi":null,"onyomi":null},{"character":"レ","meaning":"re","kunyomi":null,"onyomi":null},{"character":"ロ","meaning":"ro","kunyomi":null,"onyomi":null},{"character":"ワ","meaning":"wa","kunyomi":null,"onyomi":null},{"character":"ヲ","meaning":"wo","kunyomi":null,"onyomi":null},{"character":"ン","meaning":"n, nn","kunyomi":null,"onyomi":null}];
			var currentKanji = undefined;
			var currentGroupset = [];
			var mouseX = 0;
			var mouseY = 0;
			var isDrawing = false;
			
//CANVAS STUFF
			function clearScreen(){	//clears the Canvas, nice and clean! <3
				writeBox.width = writeBox.width;
			}
			function postCurrent(){
				clearScreen();
				ctx.font = 'bold 250px sans-serif';
				ctx.fillStyle = 'rgba(0,0,0,.12)';
				ctx.fillText(currentKanji.character,25,240);
				//TODO: MODIFY ARTICLE CONTENTS WITH MEANINGS AND READINGS
				document.getElementById("thisKanji").innerHTML = currentKanji.character;
				document.getElementById("thisMeaning").innerHTML = currentKanji.meaning;
				if(currentKanji.onyomi === null){
					document.getElementById("thisOnyomi").innerHTML = "n/a";
				}
				else{
					document.getElementById("thisOnyomi").innerHTML = currentKanji.onyomi;
				}
				if(currentKanji.kunyomi === null){
					document.getElementById("thisKunyomi").innerHTML = "n/a";
				}
				else{
					document.getElementById("thisKunyomi").innerHTML = currentKanji.kunyomi;
				}
			}
			writeBox.onmousedown = function(event){	
				isDrawing = true;
				ctx.beginPath(mouseX, mouseY);
			};
			document.onmouseup = function(event){	
				isDrawing = false;
			};
			
//BUTTON STUFF
			document.getElementById("newButton").onmousedown = function(){
				if(document.getElementById("newButton").classList.contains("buttonNormal")){
					document.getElementById("newButton").classList.remove("buttonNormal");
					document.getElementById("newButton").classList.add("buttonClicked");
				}
			}
			document.getElementById("clearButton").onmousedown = function(){
				if(document.getElementById("clearButton").classList.contains("buttonNormal")){
					document.getElementById("clearButton").classList.remove("buttonNormal");
					document.getElementById("clearButton").classList.add("buttonClicked");
				}
			}
			document.getElementById("inputButton").onmousedown = function(){
				if(document.getElementById("inputButton").classList.contains("buttonNormal")){
					document.getElementById("inputButton").classList.remove("buttonNormal");
					document.getElementById("inputButton").classList.add("buttonClicked");
				}
			}
			document.getElementById("newButton").onmouseup = function(){
				if(document.getElementById("newButton").classList.contains("disabled")){}
				else{
					newItem();
					if(document.getElementById("newButton").classList.contains("buttonClicked")){
						document.getElementById("newButton").classList.add("buttonNormal");
						document.getElementById("newButton").classList.remove("buttonClicked");
					}
				}
			};
			document.getElementById("clearButton").onmouseup = function(){
				if(document.getElementById("clearButton").classList.contains("disabled")){}
				else{
					postCurrent();
					if(document.getElementById("clearButton").classList.contains("buttonClicked")){
						document.getElementById("clearButton").classList.add("buttonNormal");
						document.getElementById("clearButton").classList.remove("buttonClicked");
					}
				}
			};
			document.getElementById("inputButton").onmouseup = function(){
				if(document.getElementById("inputButton").classList.contains("buttonClicked")){
					document.getElementById("inputButton").classList.add("buttonNormal");
					document.getElementById("inputButton").classList.remove("buttonClicked");
				}
				if(document.getElementById("apiInput").value === ""){
					alert("Please enter your API key to access your Kanji");
				}
				else{
					collectAPI(document.getElementById("apiInput").value);
				}
			};
			
//CANVAS STUFF
			writeBox.onmousemove = function(event){
				var viewport = writeBox.getBoundingClientRect();
				if(isDrawing === true){
					mouseX = ((event.clientX - writeBox.offsetLeft));
					mouseY = ((event.clientY - writeBox.offsetTop));
					drawStuff();
				}
			};
			function drawStuff(){
				//ctx.fillStyle = "#000000";
				//ctx.arc(mouseX, mouseY, 5, 0, 2*Math.PI);
				//ctx.fillRect(mouseX, mouseY, 10, 10);
				//ctx.fill();
				ctx.lineWidth = 10;
				ctx.lineCap = "round";
				ctx.lineTo(mouseX, (mouseY /*TODO: FIGURE OUT WHAT CAUSES RANDOM COORDINATE GLITCH + 40*/));
				ctx.strokeStyle = "#000000";
				ctx.stroke();
			}
			
//ADJUSTMENT ITEM STUFF
			function clickLevel(item){
				if(item.classList.contains("disabled") === false){
					for(var i = 0; i<document.getElementById("options").childNodes.length; i++){
						if(document.getElementById("options").childNodes[i].tagName === 'LI'){
							document.getElementById("options").childNodes[i].classList.remove("selected");
						}
					}
					item.classList.add("selected");
					switchGroup(item.value);
				}
			}
			function newItem(){
				//TODO:	GENERATE CURRENTKANJI, DISPLAY ON SCREEN
				currentKanji = undefined;
				var randalf = Math.floor((Math.random()* currentGroupset.length));
				currentKanji = currentGroupset[randalf];
				postCurrent();
			}
			function switchGroup(choice){
				currentGroupset = [];
				//TODO:	SWITCH GROUP BASED ON MENU OPTIONS CHOICE. PROMPT TO CLICK NEXT, BUT NOT AUTO
				if(choice >= 1){
					for(var i = 0; i<kanji.length; i++){
						if(kanji[i].level === choice){
							currentGroupset.push(kanji[i]);
						}
						else{}
					}
				}
				else if(choice === (-1)){
					currentGroupset = hiragana;
				}
				else if (choice === (-2)){
					currentGroupset = katakana;
				}
				else{
					currentGroupset = kanji;
				}
			}
			
//API COLLECTION
			function collectAPI(key){
				var apiURL = "http://www.wanikani.com/api/user/" + key + "/kanji/";
				$.ajax({
					'type': "GET",
					'url': apiURL,
					'async': false,
					'dataType': 'jsonp',
					'success': function (data) {
						if(data.hasOwnProperty("error")){ //if you use a fake API key, you'll be warned.
							alert("API Key invalid, \n Prease try again!~");
						}
						else{ 	//API key is legitimate
							if(autoLogged === false){
								setCookie("Kakuwaku Key", key , 7);
								alert("Your API key works! \n Please begin~");
							}
							else{}
							document.getElementById("apiInput").disabled=true;
							document.getElementById("inputButton").classList.remove("buttonNormal");
							document.getElementById("inputButton").classList.add("disabled");
							user = data.user_information.username;	//set Player Name to username
							userLVL = data.user_information.level;
							for(var i = 0; i<data.requested_information.length; i++){
								var tempKanjiObj = {}
								tempKanjiObj.character = data.requested_information[i].character;
								tempKanjiObj.level = data.requested_information[i].level;
								tempKanjiObj.meaning = data.requested_information[i].meaning;
								tempKanjiObj.onyomi = data.requested_information[i].onyomi;
								tempKanjiObj.kunyomi = data.requested_information[i].kunyomi;
								kanji.push(tempKanjiObj);
							}
							document.getElementById("newButton").classList.add("buttonNormal");
							document.getElementById("clearButton").classList.add("buttonNormal");
							document.getElementById("newButton").classList.remove("disabled");
							document.getElementById("clearButton").classList.remove("disabled");
							document.getElementById("options").classList.remove("disabled");
							for(var j = 0; j<document.getElementById("options").childNodes.length; j++){
								if((document.getElementById("options").childNodes[j].value)<=userLVL){
									document.getElementById("options").childNodes[j].classList.remove("disabled");
									document.getElementById("options").childNodes[j].classList.add("functional");
								}
								if ((document.getElementById("options").childNodes[j].value)===0){
									document.getElementById("options").childNodes[j].classList.add("selected");
								}
							}
							document.getElementsByTagName("H6")[0].style.display = "block";
							document.getElementsByTagName("H6")[1].style.display = "block";
							switchGroup(0); //start this wreck!!
							newItem();
						}
					},
					'error': function(){
						var answer = Math.floor(Math.random()*4);
						switch (answer) {
							case 0:
								alert("The server is taking a pee-break.");
								break;
							case 1:
								alert("Everyone at Tofugu quit \n and an angry otaku burnt down the server.");
								break;
							case 2:
								alert("The server is distracted. \n The surprise party will be a success!");
								break;
							case 3:
								alert("The server doesn't like what you've become... \n Its taking you off its five.");
								break;
							default:
								break;
						}
					}
				});
			}
			//collectAPI("f9351955e81ea8a6e991dfdbdbb1e342");
			for(var q=0; q<document.getElementById("options").childNodes.length; q++){
				if(document.getElementById("options").childNodes[q].tagName === "LI"){
					document.getElementById("options").childNodes[q].classList.add("disabled");
				}
			}
//CALLED WHEN SUBMITTING API, to save api key
			function setCookie(cookieName, cookieValue, expirationDays){
				var expirationDate = new Date();
				expirationDate.setDate(expirationDate.getDate() + expirationDays);
				var cValue=escape(cookieValue) + ((expirationDays==null) ? "" : "; expires="+expirationDate.toUTCString());
				var theNewCookie= cookieName + "=" + cValue;
				document.cookie = theNewCookie;
			}
//CALLED WHEN OPENING PAGE, to find saved api key
			function checkCookie(){
				var apiKey = getCookie("Kakuwaku Key");
				if((apiKey != null) && (apiKey  != "")){
					return apiKey;
				}
				else{
					return false;	
				}
			}
//CALLED WHEN COOKIES FOUND, to auto submit api key
			function getCookie(cookieName){
				var cookieValue = document.cookie;
				var cookieStart = cookieValue.indexOf(" " + cookieName + "=");
				if(cookieStart == -1){
					cookieStart = cookieValue.indexOf(cookieName + "=");
				}
				if(cookieStart == -1){
					cookieValue = null;
				}
				else{
					cookieStart = cookieValue.indexOf("=", cookieStart) + 1;
					var cookieEnd = cookieValue.indexOf(";", cookieStart);
					if(cookieEnd == -1){
						cookieEnd = cookieValue.length;
					}
					cookieValue = unescape(cookieValue.substring(cookieStart, cookieEnd));
				}
				return cookieValue;
			}
			function autoLogIn(){
				if(autoLogged === false){
				}
				else{
					collectAPI(autoLogged);
				}
			}
		
			var autoLogged = checkCookie();
			autoLogIn();
		
//TODO: FIDDLE AROUND WITH KANJIVG AND SEE IF I CAN GET STROKE ORDER EXAMPLES IN THERE 		
//TODO: INVESTIGATE ACCESS-CONTROL-ALLOW-ORIGIN HEADER SO THAT I DONT HAVE TO RELY ON JQUERY FOR CDCs
			/*function loadXMLDoc(key) {
				var apiURL = "http://www.wanikani.com/api/user/" + key + "/kanji/";
				var xmlhttp;
				if (window.XMLHttpRequest) {
					xmlhttp = new XMLHttpRequest();
				} else {
					xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
				}
				xmlhttp.open("GET", apiURL, true);

				xmlhttp.onreadystatechange = function() {
					if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
						var myLittleJSONP = JSON.parse(data);
						console.log(JSON.parse(data));
					}
				}       
				xmlhttp.send();
			}*/
			
		</script>
	</body>
</html>